// @adr/vpaid v1.13.11
!function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}var e,i=!1;function s(){i=!0,"function"==typeof e&&e()}try{if(window.AdR&&window.AdR.AdMarking)s();else{var r=document.createElement("script");r.setAttribute("src","//content.adriver.ru/ad-marking.js"),r.addEventListener("load",(function(){r.parentNode.removeChild(r),window.AdR&&s()}),{once:!0}),document.head.appendChild(r)}}catch(o){}var n,a,o={isObject:function(e){var i=t(e);return"function"===i||"object"===i&&!!e},allKeys:function(t){if(!o.isObject(t))return[];var e,i=[];for(e in t)i.push(e);return i}};o.extend=(n=o.allKeys,function(t){var e=arguments.length;if(2>e||null===t)return t;for(var i=1;i<e;i++)for(var s=arguments[i],r=n(s),o=r.length,h=0;h<o;h++){var d=r[h];a&&void 0!==t[d]||(t[d]=s[d])}return t});var h=[],d=function(t,e){return(/^\//.test(t)?e:"")+t},c=function(t,e,i){e&&(e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent?e.attachEvent("on"+t,i):e[t]=i)},l=function(t){return"http:"==location.protocol||"https:"==location.protocol?(/^\/\//.test(t)?location.protocol:"")+t:(/^\/\//.test(t)?"https:":"")+t},u=function(t,e){return void 0===e?"":t+"="+e},m=function(t,e){var i=[];for(var s in e=e||";",t)i.push(u(s,t[s]));return i.join(e)},p=function(t,e){for(var i in t)t[i]=e[i]||t[i];return t},v=function(t){if(t=l(t).split("![rnd]").join(~~(1e6*Math.random())),document.createElement&&document.body){var e=document.createElement("img");e.style.position="absolute",e.style.display="none",e.style.width=e.style.height="0px",e.setAttribute("referrerpolicy","no-referrer-when-downgrade"),e.src=t,document.body.appendChild(e)}else{var i=new Image;i.setAttribute("referrerpolicy","no-referrer-when-downgrade"),i.src=t}},y=function(t,e,i){return e&&-1==t.indexOf("&custom=")&&(t+="&custom="+e),void 0!==i&&(t+="&ct="+i),v(t),this},f=function(t){return"//ev.adriver.ru/cgi-bin/eclick.cgi?"+m(p({bid:0,xpid:"",sid:t.site,bn:0,ad:0,sz:0,bt:0,pz:0,rnd:"![rnd]"},t),"&")+"&erir="+(t.erir||"")+"&rleurl="},b=function(t){return"//ev.adriver.ru/cgi-bin/click.cgi?"+m(p({bid:0,xpid:"",sid:t.site,bn:0,ad:0,sz:0,bt:0,pz:0,rnd:"![rnd]"},t),"&")+"&rleurl="},w=function(){this.videoSlot_=this.slot_=null,this.eventsCallbacks_={},this.quartileEvents_=[{event:"AdVideoStart",custom:2,value:0},{event:"AdVideoFirstQuartile",custom:4,value:25},{event:"AdVideoMidpoint",custom:3,value:50},{event:"AdVideoThirdQuartile",custom:5,value:75},{event:"AdVideoComplete",custom:6,value:100}],this.adVolume=void 0,this.adWidth=100,this.adHeight=100,this.viewMode="normal",this.expanded=!1,this.skippableState=!1,this.skipTime=void 0,this.companions="",this.icons="",this.set={a:0,b:0,c:"",d:0},this.linear=!0,this.remainingTime=0,this.duration=-2,this.desiredBitrate=256,this.lastQuartileIndex_=0,this.parameters_={},this.mainDiv=void 0,this.mainClick=void 0,this.time_=0,this.muteTime=0,this.startTime=(new Date).getTime(),this.oneSecPoint_=0,this.rnd=Math.round(1e8*Math.random()).toString(),this.muteButton="",this.unmuteButton="",this.closeButton="",this.buttonsReady=!1,this.buttonDrawStarted=!1,this.mouseCoords={x:0,y:0},this.readyForViewability=!1,this.viewabilityStarted=!1,this.viewabilityEvent=0,this.viewabilityEventStartTime=void 0,this.secondaryViewability=void 0,this.secondaryViewabilityStartTime=void 0,this.secondaryViewabilitySend=!1,this.ancestorLength=void 0,this.historyLength="undefined"!=typeof history?history.length:"",this.slotWin=void 0,this.frameNode=void 0,this.frameElement=void 0,this.frameNodeDelay=void 0,this.frameNodeUrl=void 0,this.frameNodePause=!1,this.frameNodeContent=void 0,this.frameNodeTime=-1,this.frameNodeTimer=void 0,this.frameNodeDrawn=0,this.quizzLoader='<script src="//content.adriver.ru/html.js"><\/script><script>var ar_html_params=![ar_html_params];<\/script><link href="![domain]/images/0006677/0006677613/0/styles.css" rel="stylesheet" type="text/css"/><script src="![domain]/images/000![bidsep]/000![bid]/0/config.js"><\/script><script src="![domain]/images/0006677/0006677613/0/script.js"><\/script><div class="slider"></div>\r\n',this.quizzDraw=!1,this.wlapproved=!0,this.clickable=!0,this.click_delay=0,this.close_click=!1,this.pHandles=!1,this.hoverTime=0,this.mouseEnterStart=null,this.hoverTimerId=null,this.hoverTimer=0,this.isProgressSend=!1,this.progressTime=void 0,this.isInterfaceDuration=!1,this.sendLastSec=!1};w.prototype.initAd=function(t,s,r,n,a,h){if(this.adWidth=t,this.adHeight=s,this.viewMode=r,this.desiredBitrate=n,this.slot_=h.slot,"undefined"==typeof AdriverViewability){window.AdriverViewability=!0,this.loadScript("//content.adriver.ru/banners/0002186/0002186173/0/AV.js",this.slot_);try{this.slotWin=this.slot_.ownerDocument.defaultView}catch(a){}}this.videoSlot_=h.videoSlot;var d="undefined"==typeof adParameters?{}:adParameters;this.parameters_=o.extend(d,JSON.parse(a.AdParameters));var c=function(){try{this.AdMarking=new AdR.AdMarking({erirId:this.parameters_.erir,containerid:this.slot_,ads:this.parameters_.ads,position:this.parameters_.position})}catch(t){}}.bind(this);if(i?c():e=c,this.event=function(t){return"//ev.adriver.ru/cgi-bin/event.cgi?"+m(p({bid:0,xpid:"",sid:t.site,bn:0,ad:0,sz:0,bt:0,pz:0,rnd:"![rnd]"},t),"&")+"&type=&tuid=-1"}(this.parameters_),void 0===this.parameters_.chwl&&(this.parameters_.chwl=""),this.parameters_.chwl)this.makeWLRequest();else{this.eclick=f(this.parameters_),this.click=b(this.parameters_),this.skipTime=this.setSkipTime(),this.ancestorLength=this.getAncestorLength();try{""!==this.parameters_.cv.area&&""!==this.parameters_.cv.time&&(this.secondaryViewability=this.parameters_.cv)}catch(a){}try{0===this.parameters_.clickable&&(this.clickable=!1)}catch(a){}try{this.parameters_.click_delay>0&&(this.click_delay=this.parameters_.click_delay)}catch(a){}try{this.parameters_.close_click>0&&(this.close_click=!0)}catch(a){}try{1===parseInt(this.parameters_.playerHandles)&&(this.pHandles=!0)}catch(a){}this.updateVideoSlot_(),this.videoSlot_.addEventListener("ended",this.stopAd.bind(this),!1),this.videoSlot_.addEventListener("pause",this.clearViewability.bind(this)),this.loadJSTrackers(),this.callEvent_("AdLoaded")}},w.prototype.callbackInit=function(t){try{var e=t;this.wlapproved=0!==parseInt(e.chwl)}catch(t){this.log("Parse error"),this.wlapproved=!0}if(this.wlapproved){this.eclick=f(this.parameters_),this.click=b(this.parameters_),this.skipTime=this.setSkipTime(),this.ancestorLength=this.getAncestorLength();try{""!==this.parameters_.cv.area&&""!==this.parameters_.cv.time&&(this.secondaryViewability=this.parameters_.cv)}catch(t){}try{0===this.parameters_.clickable&&(this.clickable=!1)}catch(t){}try{this.parameters_.click_delay>0&&(this.click_delay=this.parameters_.click_delay)}catch(t){}try{this.parameters_.close_click>0&&(this.close_click=!0)}catch(t){}try{1===parseInt(this.parameters_.playerHandles)&&(this.pHandles=!0)}catch(t){}this.updateVideoSlot_(),this.videoSlot_.addEventListener("ended",this.stopAd.bind(this),!1),this.videoSlot_.addEventListener("pause",this.clearViewability.bind(this)),this.loadJSTrackers(),this.callEvent_("AdLoaded")}else{var i=this.getCustoms(161,162,168,176,213,214,216,217,163);this.sendEvent(this.event,70,i,1),this.log("AdError: WL"),this.callEvent_("AdError")}},w.prototype.onMoreClick_=function(t,e,i){var s=this.getCustoms(161,162,164,165,166,167,170,176,178,201);this.sendEvent(this.event,21,s,1),y(this.eclick,s,2),window.open(t),this.callEvent_("AdClickThru","",e,i)},w.prototype.onAdClick_=function(t,e){var i=this.getCustoms(1,161,162,164,165,166,167,170,176,178,201),s="";!1===this.pHandles?(y(this.eclick,i),t&&window.open(t)):s=function(t,e,i){return t=l(t).split("![rnd]").join(~~(1e6*Math.random())),e&&-1==t.indexOf("&custom=")&&(t+="&custom="+e),void 0!==i&&(t+="&ct="+i),t}(this.click,i),this.callEvent_("AdClickThru",s,e,this.pHandles),this.close_click&&this.stopAd()},w.prototype.buttonOnClick_=function(t,e,i){var s=this.getCustoms(161,162,164,165,166,167,170,176,178,201);this.sendEvent(this.event,20,s,1),y(this.eclick,s,1),this.callEvent_("AdInteraction"),window.open(t),this.callEvent_("AdClickThru","",e,i)},w.prototype.timeUpdateHandler_=function(){var t=this,e=this.duration-this.videoSlot_.currentTime;this.duration>0&&this.remainingTime!=e&&this.setAdRemainingTime(e),(!this.buttonDrawStarted&&this.videoSlot_.duration>0&&this.videoSlot_.currentTime<=1&&this.videoSlot_.currentTime>0||!this.buttonDrawStarted&&this.videoSlot_.currentTime>1)&&(this.buttonDrawStarted=!0,this.drawButtons());var i=this.viewability_.getViewability();if(void 0!==this.viewabilityEventStartTime)"viewable"!==i?this.clearViewability(!0):this.videoSlot_.currentTime-this.viewabilityEventStartTime>=2&&this.sendViewability(!0);else if(!this.viewabilityEvent&&"viewable"===i){var s=this.videoSlot_.currentTime<.5?0:this.videoSlot_.currentTime;this.viewabilityEventStartTime=s}if(void 0!==this.secondaryViewability){if(this.secondaryViewability.time==this.getAdDuration()){this.secondaryViewability.time=this.secondaryViewability.time-.5}var r=this.viewability_.getViewableProc();if(void 0!==this.secondaryViewabilityStartTime)r<this.secondaryViewability.area?this.clearViewability(!1):this.videoSlot_.currentTime-this.secondaryViewabilityStartTime>=this.secondaryViewability.time&&this.sendViewability(!1);else if(r>=this.secondaryViewability.area){var n=this.videoSlot_.currentTime<.5?0:this.videoSlot_.currentTime;this.secondaryViewabilityStartTime=n}}try{var a=this.parameters_.TrackingEvents.progress_offset;a&&void 0===this.progressTime&&(this.progressTime="%"===a.slice(-1)?+a.slice(0,-1)*this.duration/100:+a)}catch(p){}if(void 0!==this.progressTime&&!this.isProgressSend&&this.videoSlot_.currentTime>=this.progressTime&&(this.isProgressSend=!0,this.sendEvent(this.event,19,"",1)),h[1]&&this.videoSlot_.currentTime>this.oneSecPoint_&&this.oneSecPoint_!==Math.round(this.duration)&&!this.isVideoComplete()){var o=this.getCustoms(161,162,164,165,166,167,170,171,176,201,229);this.sendEvent(this.event,50,o,1),this.oneSecPoint_=Math.ceil(this.videoSlot_.currentTime)}if(!(this.lastQuartileIndex_>=this.quartileEvents_.length)&&this.videoSlot_.currentTime/this.duration*100>=this.quartileEvents_[this.lastQuartileIndex_].value){var u=this.quartileEvents_[this.lastQuartileIndex_].event,m=this.quartileEvents_[this.lastQuartileIndex_].custom;o=this.getCustoms(161,162,164,165,166,167,170,171,176,201,216,217,229);this.sendEvent(this.event,m,o),this.isVideoComplete()&&!this.sendLastSec&&(this.sendLastSec=!0,this.sendEvent(this.event,50,o,1),this.stopAd()),setTimeout((function(){t.eventsCallbacks_[u]&&t.eventsCallbacks_[u]()}),300),this.lastQuartileIndex_+=1}var p,v=this.muteButton,y=this.unmuteButton;if(v&&y&&(0!=this.adVolume&&(v.style.display="none",y.style.display="block"),0==this.adVolume&&(v.style.display="block",y.style.display="none")),void 0!==this.skipTime&&this.buttonsReady?!this.closeButton&&this.videoSlot_.currentTime>=this.skipTime&&!this.skippableState?(this.skippableState=!0,this.callEvent_("AdSkippableStateChange")):this.closeButton&&this.videoSlot_.currentTime>=this.skipTime&&"none"===this.closeButton.style.display&&(this.closeButton.style.display="block"):this.closeButton&&"none"===this.closeButton.style.display&&(this.closeButton.style.display="block"),this.clickable&&0!==this.click_delay&&this.click_delay<=this.videoSlot_.currentTime&&(this.click_delay=0,c("click",this.mainClick,this.onAdClick_.bind(this,this.parameters_.url,2))),void 0!==this.frameNode&&void 0!==this.frameNodeDelay&&this.videoSlot_.currentTime>=this.frameNodeDelay&&!this.frameNodeDrawn){this.frameNodePause&&this.pauseAd(),this.frameNode.style.display="block";var f=void 0;if(void 0!==this.frameNodeUrl&&(this.frameNodeUrl=d(l(this.frameNodeUrl).split("![rnd]").join(this.rnd),this.parameters_.domain),f=void 0!==this.parameters_.loader?void 0:this.frameNodeUrl),this.frameElement=this.newElement("iframe",this.frameNode,f,{scrolling:"no",marginwidth:0,marginheight:0,frameborder:0,vspace:0,hspace:0,width:"100%",height:"100%"}),this.frameNodeDrawn=1,this.quizzDraw&&(this.parameters_.loader=this.quizzLoader),void 0!==this.parameters_.loader){if(-1!==this.parameters_.loader.indexOf("![ar_html_params]")){var b={bid:this.parameters_.bid,xpid:this.parameters_.xpid,sid:this.parameters_.site,bn:this.parameters_.bn,ad:this.parameters_.ad,sz:this.parameters_.sz,bt:this.parameters_.bt,pz:this.parameters_.pz,tuid:-1,pid:this.parameters_.pid,sliceid:this.parameters_.sliceid,rnd:this.rnd};this.parameters_.loader=this.parameters_.loader.split("![ar_html_params]").join(JSON.stringify(b)).split("![domain]").join(this.parameters_.domain).split("![bid]").join(this.parameters_.bid).split("![bidsep]").join((this.parameters_.bid+"").substring(0,4))}this.frameNodeTime>=0&&(this.frameNodeTimer=setTimeout(this.adUserClose.bind(this),1e3*this.frameNodeTime));var w=this.frameElement.contentWindow||this.frameElement,g=(p=this.frameElement).contentWindow?p.contentWindow.document:p.contentDocument;g.open(),g.defineMethods=function(t,e,i,s){t.clearIframeTimeout=i.bind(e),t.closeAd=s.bind(e)}(w,this,this.clearIframeTimeout,this.adUserClose),g.write("<body>"+this.parameters_.loader+"</body>"),g.close()}}},w.prototype.clearIframeTimeout=function(){void 0!==this.frameNodeTimer&&clearTimeout(this.frameNodeTimer)},w.prototype.sendViewability=function(t){var e=!1;if(t&&"viewable"===this.viewability_.getViewability()&&!this.viewabilityEvent){this.viewabilityEvent=1;var i=this.getCustoms(161,162,164,165,166,167,170,176,201,216,217);this.sendEvent(this.event,53,i),e=!0}else if(!t&&this.viewability_.getViewableProc()>=this.secondaryViewability.area&&!this.secondaryViewabilitySend){this.secondaryViewabilitySend=!0;i=this.getCustoms(161,162,164,165,166,167,170,176,201,216,217);this.sendEvent(this.event,69,i),e=!0}else this.clearViewability(t);if(this.isOtherFullscreenMode()&&e){i=this.getCustoms(100,101,161,162,164,165,166,167,168,170,171,173,176,177,178,201,213,214,216,217,163);this.sendEvent(this.event,71,i)}},w.prototype.clearViewability=function(t){(t||"boolean"!=typeof t)&&(this.viewabilityEventStartTime=void 0),t&&"boolean"==typeof t||(this.secondaryViewabilityStartTime=void 0)},w.prototype.viewability_={getViewability:function(){},getViewableProc:function(){},isMeasurable:function(){var t=navigator.userAgent;return(/trident/gi.test(t)||/msie/gi.test(t))&&this.isIframe?0:1},isTabVisible:function(){}},w.prototype.startViewabilityCheck=function(){"function"!=typeof window.AdriverViewability&&"function"!=typeof this.slotWin.AdriverViewability||!this.readyForViewability||this.viewabilityStarted||(void 0===this.slotWin?"undefined"!=typeof AdriverViewability&&(this.viewability_=new AdriverViewability(this.event,3,this.videoSlot_,2e3)):this.viewability_=new this.slotWin.AdriverViewability(this.event,3,this.slot_,2e3),this.viewabilityStarted=!0)},w.prototype.updateVideoSlot_=function(){var t=this;null==this.videoSlot_&&(this.videoSlot_=document.createElement("video"),this.log("Warning: No video element passed to ad, creating element."),this.slot_.appendChild(this.videoSlot_),this.videoSlot_.muted=!0),this.setPar(),this.updateVideoPlayerSize_(),this.readyForViewability=!0,this.startViewabilityCheck(),void 0===this.mainDiv&&this.drawMainDiv();for(var e=!1,i=this.parameters_.videos||[],s=0;s<i.length;s++)if(""!==this.videoSlot_.canPlayType(i[s].mimetype)){e=d(this.parameters_.videos[s].url,this.parameters_.domain),this.videoSlot_.setAttribute("src",e),e=!0;break}this.videoSlot_.addEventListener("loadedmetadata",(function(){if(void 0!==t.parameters_.duration&&t.duration<=0)try{var e=t.parameters_.duration.split(":");e=3600*+e[0]+60*+e[1]+ +e[2],t.setAdDuration(e)}catch(t){}try{t.videoSlot_.duration!=t.duration&&!t.isInterfaceDuration&&(t.duration<=0||t.videoSlot_.duration>0)&&(t.duration>0&&t.videoSlot_.duration>180?(t.isInterfaceDuration=!0,t.setAdDuration(Math.min(t.videoSlot_.duration,t.duration))):t.setAdDuration(t.videoSlot_.duration))}catch(t){}})),this.videoSlot_.load(),e||(this.log("AdError"),this.callEvent_("AdError"))},w.prototype.updateVideoPlayerSize_=function(){this.slot_.setAttribute("width",this.adWidth),this.slot_.setAttribute("height",this.adHeight),1===this.videoSlot_.nodeType&&"VIDEO"===this.videoSlot_.nodeName.toUpperCase()&&this.videoSlot_&&0!=this.adWidth&&0!=this.adHeight&&(this.videoSlot_.style.width=this.adWidth+"px",this.videoSlot_.style.height=this.adHeight+"px")},w.prototype.getPlayerHeight=function(){if((t=this.slot_.getBoundingClientRect()).height<=0&&void 0!==this.videoSlot_.getBoundingClientRect){var t=this.videoSlot_.getBoundingClientRect();return Math.round(t.height)}return Math.round(t.height)},w.prototype.getPlayerWidth=function(){var t=this.slot_.getBoundingClientRect();return Math.round(t.width)},w.prototype.getPlayerLocation=function(){var t,e,i,s,r=this.isIframe(0,1);if(this.set.c)return this.set.c;if(-1!==(t=1==r[0]?window.location.href:void 0===r[1]?"":r[1]).indexOf("doubleclick")||-1!==t.indexOf("betweendigital")||-1!==t.indexOf("vidroll.ru")||-1!==t.indexOf("video-play.ru"))for(var n in-1!==t.indexOf("doubleclick")?i="url":-1!==t.indexOf("betweendigital")?i="ref":-1===t.indexOf("vidroll.ru")&&-1===t.indexOf("video-play.ru")||(i="wpl"),s=t.split("&"))void 0!==(e=s[n].split("="))[1]&&""!==e[1]&&e[0]==i&&(t=e[1]);try{var a=window.location.ancestorOrigins;if(void 0===a)return encodeURIComponent(t);var o=(a=a.length>0?a[a.length-1]:void 0).split("/")[2];return t.split("/")[2]!==o&&""!==o?encodeURIComponent(a):encodeURIComponent(t)}catch(e){return encodeURIComponent(t)}},w.prototype.setPar=function(){try{var t,e=window,i=0;if("undefined"==typeof playerParams)for(;e.parent!=e&&i<10&&void 0===e.playerParams&&e.parent.document.domain===e.document.domain;)i++,void 0!==e.parent.playerParams&&(t=e.parent.playerParams),e=e.parent;else t=playerParams;void 0!==t&&"vk"===t.type&&(void 0!==t.params[0].referrer&&(this.set.c=t.params[0].referrer),void 0!==t.params[0].a&&(this.set.a=t.params[0].a),void 0!==t.params[0].g&&(1===t.params[0].g?this.set.b="m":2===t.params[0].g&&(this.set.b="f")),void 0!==t.params[0].viewer_id&&(this.set.d=t.params[0].viewer_id))}catch(t){}},w.prototype.isNum=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},w.prototype.isIframe=function(t,e){var i={OnPage:1,Iframe:2,SameDomainIframe:3},s=0;if(e){var r=function(t){var e,i=[];try{if(window.top==window)return i.push(t.OnPage),i.push(window.document.referrer),i;for(var r=window;r.parent!=r&&s<1e3;){if(s++,e=r,r.parent.document.domain!=r.document.domain)return i.push(t.Iframe),i.push(r.document.referrer),i;r=r.parent}return i.push(t.SameDomainIframe),i.push(r.document.location.href),i}catch(t){}return e?(i.push(t.Iframe),i.push(e.document.referrer)):i.push(t.Iframe),i}(i);return r}r=function(t,e){try{if(window.top==window)return t.OnPage;for(var i=window;i.parent!=i&&s<1e3;){if(s++,i.parent.document.domain!=i.document.domain)return t.Iframe;i=i.parent}return e?t.SameDomainIframe:t.OnPage}catch(t){}return t.Iframe}(i,t);return!(t&&3==r&&s<=1)&&r!=i.OnPage},w.prototype.getMuteTime=function(){var t=this.muteTime,e=Math.round(10*this.getAdCurrentTime())/10;return this.muteTime=e,0==t?e:Math.round(e-t)},w.prototype.getCustoms=function(t){for(var e=arguments,i="",s=0;s<e.length;s++)switch(e[s]){case 1:for(var r in this.parameters_.custom){var n=parseInt(r,10);void 0!==this.parameters_.custom[r]&&""!==this.parameters_.custom[r]&&n<100&&n>0&&(i+=r+"="+this.parameters_.custom[r]+";")}0!==this.set.b&&(i+="100="+this.set.b+";");break;case 100:0!==this.set.b&&(i+="100="+this.set.b+";");break;case 101:this.isNum(this.set.a)&&this.set.a<=100&&this.set.a>0&&(i+="101="+Math.round(this.set.a)+";");break;case 113:i+="113="+(void 0!==this.secondaryViewability?"1":"0")+";";break;case 161:i+="161="+Math.round(this.getPlayerWidth())+";";break;case 162:i+="162="+Math.round(this.getPlayerHeight())+";";break;case 163:i+="163="+this.getPlayerLocation()+";";break;case 164:i+="164="+this.viewability_.getViewability()+";";break;case 165:i+="165="+this.viewability_.getViewableProc()+";";break;case 166:i+="166="+this.viewability_.isTabVisible()+";";break;case 167:i+="167="+(this.isVideoComplete()?Math.round(this.getAdDuration()):Math.round(this.getAdCurrentTime()))+";";break;case 168:i+="168="+this.isIframe()+";";break;case 169:i+="169="+this.getMuteTime()+";";break;case 170:i+="170="+("number"==typeof this.getPlayerVolume()?Math.round(10*this.getPlayerVolume()):-1)+";";break;case 171:i+="171="+Math.round(this.getAdDuration())+";";break;case 173:this.isNum(this.set.d)&&0!==this.set.d&&(i+="173="+Math.round(this.set.d)+";");break;case 176:i+="176="+((new Date).getTime()-this.startTime)+";";break;case 177:i+="177="+this.viewability_.isMeasurable()+";";break;case 178:i+="178=js;";break;case 201:i+="201="+Math.round(this.mouseCoords.x)+";202="+Math.round(this.mouseCoords.y)+";";break;case 213:i+="213="+this.ancestorLength+";";break;case 214:i+="214="+this.historyLength+";";break;case 216:i+="216="+window.screen.width+";";break;case 217:i+="217="+window.screen.height+";";break;case 229:i+="229="+this.hoverTime+";";break;case 230:i+="230="+window.navigator.hardwareConcurrency+";";break;case 231:i+="231="+this.getSizes()+";";break;case 232:i+="232="+encodeURIComponent(window.navigator.userAgent)+";";break;case 233:i+="233="+encodeURIComponent(this.getPlugins())+";";break;case 234:i+="234="+-(new Date).getTimezoneOffset()/60+";";break;case 235:i+="235="+encodeURIComponent(this.getVideoCard())+";"}return i.substr(0,i.length-1)},w.prototype.handshakeVersion=function(t){return"2.0"},w.prototype.drawMainDiv=function(){this.mainDiv=document.createElement("div"),this.mainDiv.id="VPAIDcontrols"+this.rnd,this.mainDiv.onmouseenter=this.mouseEnter.bind(this),this.mainDiv.onmouseleave=this.mouseLeave.bind(this),this.mainDiv.style.height=this.mainDiv.style.width="100%",this.mainDiv.style.position="absolute",this.mainDiv.style.top=0,this.mainDiv.style.left=0,this.slot_.appendChild(this.mainDiv);for(var t=this.slot_.childNodes,e=0;e<t.length;e++)if(t[e].id==="VPAIDcontrols"+this.rnd){this.mainDiv=t[e];break}this.mainClick=document.createElement("img"),this.mainClick.src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",this.mainClick.style.height=this.mainClick.style.width="100%",this.mainClick.style.cursor="pointer",this.mainDiv.appendChild(this.mainClick),c("mousemove",this.mainClick,this.checkMouseCoords.bind(this,this.slot_.childNodes))},w.prototype.drawButtons=function(){function t(t){for(var e,i=Object.keys(t),s="",r=0;r<i.length;r++)t[i[r]]&&(s+=i[r]+":"+(e=t[i[r]],(/^\d+$/.test(e)?e+"px":e)+";"));return s}void 0===this.mainDiv&&this.drawMainDiv();for(var e="",i=this.parameters_.buttons.length;i--;)if(this.parameters_.buttons[i].image){switch((s=document.createElement("div")).setAttribute("style","z-index: 9999; "+t(this.parameters_.buttons[i].style)+"background-image: url("+d(this.parameters_.buttons[i].image,this.parameters_.domain)+")"),this.parameters_.buttons[i].name){case"mute":s.id="VPAIDMuteButton"+this.rnd;break;case"unmute":s.id="VPAIDUnmuteButton"+this.rnd;break;case"close":if(void 0===this.skipTime)continue}switch(this.mainDiv.appendChild(s),this.parameters_.buttons[i].name){case"buy":c("click",s,this.buttonOnClick_.bind(this,this.parameters_.buttons[i].clickTracking[0].clickUrl,1,!1));break;case"more":e=this.parameters_.buttons[i].clickTracking&&this.parameters_.buttons[i].clickTracking[0].clickUrl,c("click",s,this.onMoreClick_.bind(this,e,2,!1));break;case"mute":this.muteButton=s,c("click",s,this.muteButtonOnClick_.bind(this));break;case"unmute":this.unmuteButton=s,c("click",s,this.muteButtonOnClick_.bind(this));break;case"close":this.closeButton=s,s.style.display="none",c("click",s,this.onSkipAd.bind(this))}c("mousemove",s,this.checkMouseCoords.bind(this,this.slot_.childNodes))}else if("iframe"===this.parameters_.buttons[i].name){var s;(s=document.createElement("div")).setAttribute("style","z-index: 10000; "+t(this.parameters_.buttons[i].style)),s.style.display="none",this.mainDiv.appendChild(s),this.frameNode=s,this.frameNodeDelay=this.parameters_.buttons[i].delay,this.frameNodeUrl=this.parameters_.buttons[i].url||"",void 0!==this.parameters_.buttons[i].pause&&(this.frameNodePause=this.parameters_.buttons[i].pause),void 0!==this.parameters_.buttons[i].time&&(this.frameNodeTime=this.parameters_.buttons[i].time),void 0!==this.parameters_.buttons[i].quiz&&(this.quizzDraw=this.parameters_.buttons[i].quiz),-1!==this.frameNodeUrl.indexOf(".html")&&-1!==this.frameNodeUrl.indexOf(".htm")&&void 0===this.parameters_.loader&&(this.frameNodeUrl+=(/\?/.test(this.frameNodeUrl)?"&":"?")+"html_params="+escape(m(p({bid:0,xpid:"",sid:this.parameters_.site,bn:0,ad:0,sz:0,bt:0,pz:0,rnd:this.rnd},this.parameters_),"&")))}this.clickable&&0===this.click_delay&&c("click",this.mainClick,this.onAdClick_.bind(this,this.parameters_.url,2)),this.buttonsReady=!0},w.prototype.startAd=function(){this.sendEvent(this.event,103,this.getCustoms(230,231,233,234),1),this.sendEvent(this.event,104,this.getCustoms(232,235),1),this.callEvent_("AdImpression"),this.callTrackingEvent("Impression");var t=this.getCustoms(100,101,113,161,162,164,165,166,167,168,170,171,173,176,177,178,201,213,214,216,217,163);h[1]||(this.sendEvent(this.event,1,t),this.callEvent_("AdStarted")),this.videoSlot_.addEventListener("timeupdate",this.timeUpdateHandler_.bind(this),!1),this.adVolume=this.videoSlot_.muted?0:this.videoSlot_.volume,this.videoSlot_.play()},w.prototype.stopAd=function(){"temporary_id"===this.slot_.id&&(this.slot_.id="");var t=this.callEvent_.bind(this);this.videoSlot_.pause(),setTimeout(t,1500,["AdStopped"])},w.prototype.adUserClose=function(){var t=this.getCustoms(161,162,164,165,166,167,170,176,201);this.sendEvent(this.event,15,t,1),setTimeout(this.stopAd.bind(this),300),this.callEvent_("AdUserClose")},w.prototype.onSkipAd=function(){var t=this.getCustoms(161,162,164,165,166,167,170,176,201);this.sendEvent(this.event,18,t,1);var e=this.callEvent_.bind(this);setTimeout(e,200,["AdSkipped"]),setTimeout(this.stopAd.bind(this),300)},w.prototype.setAdVolume=function(t){if(this.adVolume!=t){if(0==this.adVolume&&t>0||this.adVolume>0&&0==t){this.checkPlayerMute()&&(this.videoSlot_.muted=!1),this.adVolume=t;var e=this.getCustoms(161,162,164,165,166,167,169,170,176,201);t>0?this.sendEvent(this.event,8,e,1):this.sendEvent(this.event,7,e,1)}else this.adVolume=t;try{this.videoSlot_.volume=t}catch(t){}this.callEvent_("AdVolumeChange")}},w.prototype.isVideoComplete=function(){return this.videoSlot_.currentTime/this.duration*100>=100},w.prototype.getAdVolume=function(){return this.adVolume},w.prototype.checkPlayerMute=function(){var t=!1;try{this.videoSlot_.muted&&(t=!0)}catch(t){}return t},w.prototype.checkMouseCoords=function(t,e){this.mouseCoords=this.getMouseCoords(e)},w.prototype.dropMouseCoords=function(t,e){this.mouseCoords={x:0,y:0}},w.prototype.getMouseCoords=function(t){var e=t.target.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}},w.prototype.resizeAd=function(t,e,i){var s=this.viewMode;if(this.adWidth=t,this.adHeight=e,this.viewMode=i,this.updateVideoPlayerSize_(),this.viewMode!=s&&"fullscreen"==this.viewMode){var r=this.getCustoms(161,162,164,165,166,167,170,176,201);this.sendEvent(this.event,16,r,1)}else if(this.viewMode!=s&&"fullscreen"==s){r=this.getCustoms(161,162,164,165,166,167,170,176,201);this.sendEvent(this.event,17,r,1)}this.callEvent_("AdSizeChange")},w.prototype.newElement=function(t,e,i,s){try{s=s||{};var r=document.createElement(t);for(var n in i&&r.setAttribute("src",i),s)s.hasOwnProperty(n)&&r.setAttribute(n,s[n]);return e?e.appendChild(r):document.body.appendChild(r),r}catch(r){}},w.prototype.pauseAd=function(){this.videoSlot_.pause();var t=this.getCustoms(161,162,164,165,166,167,170,176,201);this.sendEvent(this.event,9,t,1),this.callEvent_("AdPaused")},w.prototype.resumeAd=function(){this.videoSlot_.play();var t=this.getCustoms(161,162,164,165,166,167,170,176,201);this.sendEvent(this.event,11,t,1),this.callEvent_("AdPlaying")},w.prototype.mouseEnter=function(t){this.checkMouseCoords(this,t);var e=this.getCustoms(161,162,164,165,166,167,170,176,201);this.sendEvent(this.event,51,e,1),this.startHoverTimer()},w.prototype.mouseLeave=function(){this.dropMouseCoords();var t=this.getCustoms(161,162,164,165,166,167,170,176,201);this.sendEvent(this.event,52,t,1),this.stopHoverTimer()},w.prototype.expandAd=function(){this.expanded=!0,this.callEvent_("AdExpanded")},w.prototype.getAdExpanded=function(){return this.expanded},w.prototype.collapseAd=function(){this.expanded=!1},w.prototype.getAdSkippableState=function(){return this.skippableState},w.prototype.skipAd=function(){this.skippableState&&this.onSkipAd()},w.prototype.subscribe=function(t,e,i){t=t.bind(i),this.eventsCallbacks_[e]=t},w.prototype.unsubscribe=function(t){delete this.eventsCallbacks_[t]},w.prototype.getAdWidth=function(){return this.adWidth},w.prototype.getAdHeight=function(){return this.adHeight},w.prototype.getAdRemainingTime=function(){return this.remainingTime},w.prototype.setAdDuration=function(t){this.duration=Number(t),this.callEvent_("AdDurationChange")},w.prototype.setAdRemainingTime=function(t){this.remainingTime=t,this.callEvent_("AdRemainingTimeChange")},w.prototype.setSkipTime=function(){if(void 0!==this.parameters_.skiptime)try{var t,e=this.parameters_.skiptime;return-1!==e.indexOf("&#x3A;")?t="&#x3A;":-1!==e.indexOf(":")&&(t=":"),e=e.split(t),e=3600*Number(e[0])+60*Number(e[1])+Number(e[2])}catch(t){}},w.prototype.getAdDuration=function(){return this.duration},w.prototype.getAdCurrentTime=function(){return this.videoSlot_.currentTime?Math.floor(this.videoSlot_.currentTime):0},w.prototype.getAdCompanions=function(){return this.companions},w.prototype.getAdIcons=function(){return this.icons},w.prototype.getAdLinear=function(){return this.linear},w.prototype.getPlayerVolume=function(){return this.checkPlayerMute()?0:this.adVolume},w.prototype.log=function(t){console.log(t)},w.prototype.muteButtonOnClick_=function(){this.adVolume>0?this.setAdVolume(0):this.setAdVolume(1)},w.prototype.isOtherFullscreenMode=function(){try{if(/iPad|iPhone|iPod/.test(navigator.platform)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform))return!1;var t=window.outerWidth||0,e=window.outerHeight||0,i=window.screen.width||0,s=window.screen.height||0,r=this.getPlayerWidth(),n=this.getPlayerHeight(),a=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)&&-1===navigator.userAgent.indexOf("Edge"),o=r/Math.max(i,t)*100,h=n/Math.max(s,e)*100;return!(!(window.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||window.screenTop>0&&window.screenLeft>0&&screen.height-window.outerHeight<30&&screen.height-window.outerHeight==2*window.screenTop&&screen.width-window.outerWidth<30||window.navigator.platform.toUpperCase().indexOf("MAC")>=0&&0==window.screenTop&&0==window.screenLeft||a&&this.isIframe()&&r===window.screen.width&&n===window.screen.height&&(window.screen.width<window.outerWidth||window.screen.height<window.outerHeight))||!(o<=99||h<=90))}catch(t){}return!1},w.prototype.loadScript=function(t,e){try{var i=document.createElement("script");i.setAttribute("type","text/javascript"),i.setAttribute("charset","windows-1251"),i.setAttribute("src",t.split("![rnd]").join(Math.round(9999999*Math.random()))),i.onreadystatechange=function(){/loaded|complete/.test(this.readyState)&&(this.startViewabilityCheck(),e.removeChild(i),i.onload=null)}.bind(this),i.onload=function(){this.startViewabilityCheck(),e.removeChild(i)}.bind(this),e.insertBefore(i,e.firstChild)}catch(t){}},w.prototype.makeWLRequest=function(){try{var t=this.getPlayerLocation();t=(t=t.indexOf("//")>-1?t.split("/")[2]:t.split("/")[0]).split(":")[0].split("?")[0];var e="https://ev.adriver.ru/cgi-bin/json.cgi?sid=1&ad="+this.parameters_.chwl+"&bt=21&rnd="+~~(1e8*Math.random())+"&tuid=1&tail256="+t;if("fetch"in window)fetch(e,{method:"GET",mode:"cors",credentials:"include",referrerPolicy:"no-referrer-when-downgrade"}).then((function(t){var e=t.headers.get("content-type");if(e&&e.includes("application/json"))return t.json();throw new TypeError("Not json returned")})).then(function(t){this.callbackInit(t)}.bind(this)).catch((function(t){console.log(t)}));else{!function(){var t;try{t=document.head.querySelector('meta[name="referrer"]').content}catch(e){t=0}if(0===t){var e=document.createElement("meta");e.setAttribute("name","referrer"),e.content="no-referrer-when-downgrade",document.getElementsByTagName("head")[0].appendChild(e)}else"no-referrer-when-downgrade"!==t&&document.querySelector('meta[name="referrer"]').setAttribute("content","no-referrer-when-downgrade")}();var i,s=!1;window.XMLHttpRequest?void 0===(i=new window.XMLHttpRequest).responseType&&(s=!0):s=!0,s?(i=new window.XDomainRequest).onload=function(){this.callbackInit(JSON.parse(i.responseText),i)}.bind(this):i.onreadystatechange=function(){4===i.readyState&&this.callbackInit(JSON.parse(i.responseText),i)}.bind(this),i.open("GET",e),i.withCredentials=!0,s||i.setRequestHeader("Content-Type","text/plain"),i.send()}}catch(t){this.log("xhr construction",t)}},w.prototype.loadJSTrackers=function(){try{if(this.parameters_.jstracker.length>0&&this.slot_)for(var t=0;t<this.parameters_.jstracker.length;t++){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("charset","windows-1251"),e.setAttribute("src",l(this.parameters_.jstracker[t].split("![rnd]").join(Math.round(9999999*Math.random())))),this.slot_.appendChild(e)}}catch(t){}},w.prototype.callEvent_=function(t){var e=Array.prototype.slice.call(arguments,1);t in this.eventsCallbacks_&&this.eventsCallbacks_[t].apply(this,e)},w.prototype.sendEvent=function(t,e,i,s){if(t&&!h[e]){switch(i&&-1==t.indexOf("&custom=")&&(t+="&custom="),s||(h[e]=1),e){case 1:this.callTrackingEvent("creativeView");break;case 2:this.callTrackingEvent("start");break;case 3:this.callTrackingEvent("midpoint");break;case 4:this.callTrackingEvent("firstQuartile");break;case 5:this.callTrackingEvent("thirdQuartile");break;case 6:this.callTrackingEvent("complete");break;case 7:this.callTrackingEvent("mute");break;case 8:this.callTrackingEvent("unmute");break;case 9:this.callTrackingEvent("pause");break;case 11:this.callTrackingEvent("resume");break;case 16:this.callTrackingEvent("fullscreen");break;case 17:this.callTrackingEvent("exitFullscreen");break;case 18:this.callTrackingEvent("skip");break;case 19:this.callTrackingEvent("progress")}return t=t.split("&type=").join("&type="+e),i&&(t=t.split("&custom=").join("&custom="+i)),v(t),this}},w.prototype.callTrackingEvent=function(t){void 0!==this.parameters_.TrackingEvents&&t in this.parameters_.TrackingEvents&&this.parameters_.TrackingEvents[t].forEach((function(t){v(t)}))},w.prototype.getAncestorLength=function(){try{var t=window.location.ancestorOrigins;return void 0!==t?t.length:""}catch(t){return""}},w.prototype.startHoverTimer=function(){var t=this;this.mouseEnterStart=new Date,this.hoverTimerId=setInterval((function(){var e=new Date-t.mouseEnterStart,i=t.hoverTimer+e;t.updateHoverTime(i)}),1)},w.prototype.stopHoverTimer=function(){var t=new Date-this.mouseEnterStart;this.hoverTimer+=t,this.updateHoverTime(this.hoverTimer),clearInterval(this.hoverTimerId)},w.prototype.updateHoverTime=function(t){var e=new Date(t).getSeconds();this.hoverTime=e},w.prototype.getSizes=function(){return[window.screen.width,window.screen.height,window.innerWidth,window.innerHeight,window.document.documentElement.offsetWidth,window.document.documentElement.offsetHeight,window.document.body.offsetWidth,window.document.body.offsetHeight,window.document.documentElement.scrollWidth,window.document.documentElement.scrollHeight].join(",")},w.prototype.getPlugins=function(){return Array.from(window.navigator.plugins||[]).reduce((function(t,e){return t.push(e.name),t}),[]).join(" ")||"_"},w.prototype.getVideoCard=function(){var t,e=window.document.createElement("canvas"),i="_";try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(t){}if(t){var s=t.getExtension("WEBGL_debug_renderer_info");i=t.getParameter(s.UNMASKED_RENDERER_WEBGL)}return i},window.getVPAIDAd=function(){return new w}}();
